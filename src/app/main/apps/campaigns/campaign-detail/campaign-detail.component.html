<div id="campaign-detail" class="page-layout simple fullwidth">

    <div class="header accent p-24 h-160" fxLayout="row" fxLayoutAlign="space-between center">

        <div fxLayout="row" fxLayoutAlign="start center">

            <button mat-icon-button class="mr-0 mr-sm-16" [routerLink]="'/apps/campaigns'">
                <mat-icon>arrow_back</mat-icon>
            </button>

            <div fxLayout="column" fxLayoutAlign="start start"
                    [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}">
                <div class="h2">
                    Campaign Detail
                </div>
                <div class="h3 light secondary-text">
                    {{campaign.name}}
                </div>
            </div>
        </div>

    </div>
    
    <div class="content p-24">

        <form class="mat-card mat-elevation-z4 p-24 mr-24" fxLayout="column" fxLayoutAlign="start"
            fxFlex="1 0 auto" name="campaignForm" [formGroup]="campaignForm" class="form">

            <!-- <div class="h2">Create Packaging</div>
            <div class="h4 mb-24 secondary-text">{{currentDate | date: 'yyyy-MM-dd'}}</div> -->

            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">

                <mat-form-field appearance="outline" fxFlex="100">
                    <mat-label>Name</mat-label>
                    <input matInput  formControlName="name" maxlength="300" >
                </mat-form-field>

            </div>
            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">

                <mat-form-field appearance="outline" fxFlex="100">
                    <mat-label>Waste (%)</mat-label>
                    <input matInput type="number" formControlName="waste" readonly>
                    <mat-error>Waste is required!</mat-error>
                </mat-form-field>

            </div>

            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">

                <mat-form-field appearance="outline" fxFlex="100">
                    <mat-label>Description</mat-label>
                    <textarea matInput formControlName="description" ></textarea>
                </mat-form-field>

            </div>
            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">

                <mat-form-field appearance="outline" fxFlex="100">
                    <mat-label>Product</mat-label>
                    <mat-select formControlName="product" [disabled]="true" >
                        <mat-option *ngFor="let product of products" [value]="product.id">
                            {{product.name}}
                        </mat-option>
                    </mat-select>
                    <mat-error>
                        Product <strong>required</strong>
                    </mat-error>
                </mat-form-field>

            </div>
            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto" >

                <mat-form-field appearance="outline" fxFlex="100">
                    <mat-label>Dealers</mat-label>
                    <mat-select placeholder="Dealers" formControlName="dealers" multiple [disabled]="true">
                        <mat-option *ngFor="let dealer of dealerList" [value]="dealer.id">
                            {{dealer.name}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>

            </div>
            
            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">

                <mat-form-field appearance="outline" fxFlex="50" class="pr-12">
                    <mat-label>Start Date</mat-label>
                    <input matInput [matDatepicker]="dpStartDate" placeholder="Start Date" formControlName="startDate" readonly='true'>
                    <mat-datepicker-toggle matSuffix [for]="dpStartDate"></mat-datepicker-toggle>
                    <mat-datepicker #dpStartDate></mat-datepicker>
                </mat-form-field>

                <mat-form-field appearance="outline" fxFlex="50">
                    <mat-label>End Date</mat-label>
                    <input matInput [matDatepicker]="dpEndDate" placeholder="End Date" formControlName="endDate" readonly='true'>
                    <mat-datepicker-toggle matSuffix [for]="dpEndDate"></mat-datepicker-toggle>
                    <mat-datepicker #dpEndDate></mat-datepicker>
                </mat-form-field>

            </div>

            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">

                <mat-form-field appearance="outline" fxFlex="50" class="pr-12">
                    <mat-label>Alert message for overdue of Campaign</mat-label>
                    <input matInput #alertMessage formControlName="alertMessage" maxlength="255" >
                </mat-form-field>

                <mat-form-field appearance="outline" fxFlex="50">
                    <mat-label>Alert message for duplicate case</mat-label>
                    <input matInput #duplicateMessage formControlName="duplicateMessage" maxlength="255" >
                </mat-form-field>

            </div>

            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">

                <mat-form-field appearance="outline" fxFlex="50" class="pr-12">
                    <mat-label>Alert message for invalid case</mat-label>
                    <input matInput #qrCodeNotExistMessage formControlName="qrCodeNotExistMessage" maxlength="255" >
                </mat-form-field>

                <mat-form-field appearance="outline" fxFlex="50">
                    <mat-label>Alert message for success case</mat-label>
                    <input matInput #winMessage formControlName="winMessage" maxlength="255" >
                </mat-form-field>

            </div>

            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
                <mat-form-field appearance="outline" fxFlex="50" class="pr-12">
                    <mat-label>Tel</mat-label>
                    <input matInput formControlName="tel">

                </mat-form-field>

                <mat-form-field appearance="outline" fxFlex="50">
                    <mat-label>Facebook</mat-label>
                    <input matInput formControlName="facebook">
                </mat-form-field>

            </div>

            <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">                
                <mat-form-field appearance="outline" fxFlex="50" class="pr-12">
                    <mat-label>Line</mat-label>
                    <input matInput formControlName="line" >
                </mat-form-field>

                <mat-form-field appearance="outline" fxFlex="50">
                    <mat-label>Web</mat-label>
                    <input matInput formControlName="web">
                </mat-form-field>

            </div>

            <div *ngIf="campaignTypeId == 1">
                <div fxLayout="row" fxLayoutAlign="start" fxFlex="1 0 auto">
                    <div fxFlex="40" class="pr-16">     
                        <div class="example-image-card">
                            <div class="example-image-card-header p-16" fxLayout="row" fxLayoutAlign="space-between center">
                                <div class="h1 font-weight-300" style="color: rgb(5, 5, 5);">Example Collecting Image</div>
                            </div>
                            <div fxLayout="row" fxLayoutAlign="center center" class="p-16">
                                <table *ngIf="collectingType == 1">
                                    <tr *ngFor="let item of collectingData">
                                        <td>
                                            <div class="collecting-image-cell">
                                                <img class="product-image" [src]="item.extension + ',' + item.file"/>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                                <table *ngIf="collectingType == 2">
                                    <tr>
                                        <td>
                                            <div class="collecting-image-cell">
                                                <img class="product-image" [src]="collectingData[0].extension + ',' + collectingData[0].file"/>
                                                <div class="position">1:1</div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="collecting-image-cell">
                                                <img class="product-image" [src]="collectingData[1].extension + ',' + collectingData[1].file"/>
                                                <div class="position">1:2</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="collecting-image-cell">
                                                <img class="product-image" [src]="collectingData[2].extension + ',' + collectingData[2].file"/>
                                                <div class="position">2:1</div>
                                            </div>
                                            
                                        </td>
                                        <td>
                                            <div class="collecting-image-cell">
                                                <img class="product-image" [src]="collectingData[3].extension + ',' + collectingData[3].file"/>
                                                <div class="position">2:2</div>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                                <table *ngIf="collectingType == 3">
                                    <tr>
                                        <td>
                                            <div class="collecting-image-cell">
                                                <img [src]="collectingData[0].extension + ',' + collectingData[0].file">
                                                <div class="position">1:1</div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="collecting-image-cell">
                                                <img [src]="collectingData[1].extension + ',' + collectingData[1].file">
                                                <div class="position">1:2</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="collecting-image-cell">
                                                <img [src]="collectingData[2].extension + ',' + collectingData[2].file">
                                                <div class="position">2:1</div>
                                            </div>
                                            
                                        </td>
                                        <td>
                                            <div class="collecting-image-cell">
                                                <img [src]="collectingData[3].extension + ',' + collectingData[3].file">
                                                <div class="position">2:2</div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="collecting-image-cell">
                                                <img [src]="collectingData[4].extension + ',' + collectingData[4].file">
                                                <div class="position">3:1</div>
                                            </div>
                                            
                                        </td>
                                        <td>
                                            <div class="collecting-image-cell">
                                                <img [src]="collectingData[5].extension + ',' + collectingData[5].file">
                                                <div class="position">3:2</div>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>   
                    </div>
                </div>
            </div>


            <button mat-raised-button color="accent" type="button" 
                (click)="createCampaign()" 
                [disabled]="campaignForm.invalid"
                class="mt-12">
                Update
            </button>
            
        </form>
        
    </div>
    
</div>